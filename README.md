# üìò API: –ü–†–û–¶–ï–î–£–†–ù–´–ï –ö–ê–ë–ò–ù–ï–¢–´

## üì¶ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫

–í—Å–µ –æ—Ç–≤–µ—Ç—ã –æ—Ç API –ø—Ä–∏—Ö–æ–¥—è—Ç —Å HTTP —Å—Ç–∞—Ç—É—Å–æ–º **200 OK**, –≤–Ω–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞.  
–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –ø–æ –ø–æ–ª—é `status` –≤ —Ç–µ–ª–µ –æ—Ç–≤–µ—Ç–∞:

- `"status": "success"` ‚Äî –æ–ø–µ—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ.
- `"status": "fail"` ‚Äî –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞, –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø–æ–ª—è—Ö `error` –∏ `code`.


## üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

–í—Å–µ –º–µ—Ç–æ–¥—ã —Ç—Ä–µ–±—É—é—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫:

X-Api-Key: {your_api_key}

–ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º API-–∫–ª—é—á–µ:
```json
{
  "status": "fail",
  "error": "Bad API key",
  "code": 2
}
```

# –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø—Ä–æ—Ü–µ–¥—É—Ä–Ω—ã—Ö –∫–∞–±–∏–Ω–µ—Ç–æ–≤.

`–ú–µ—Ç–æ–¥: POST /api/price/schedule/procedure-rooms`

**–û–ø–∏—Å–∞–Ω–∏–µ:**  
–û—Ç–¥–∞—ë—Ç —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ—Ü–µ–¥—É—Ä–Ω—ã—Ö –∫–∞–±–∏–Ω–µ—Ç–æ–≤. (–µ—Å–ª–∏ –≤ –æ–æ—Ç–≤–µ—Ç–µ –ø–µ—Ä–µ—Å—Ç–∞–µ—Ç –ø–æ—è–≤–ª—è—Ç—Å—è –∫–∞–±–∏–Ω–µ—Ç - –∑–Ω–∞—á–∏—Ç –∫–∞–±–∏–Ω–µ—Ç –ø–æ–º–µ—á–µ–Ω –∫–∞–∫ —É–¥–∞–ª–µ–Ω. –ò–ª–∏ –ø–µ—Ä–µ—Å—Ç–∞–ª –±—ã—Ç—å –ø—Ä–æ—Ü–µ–¥—É—Ä–Ω—ã–º –∫–∞–±–∏–Ω–µ—Ç–æ–º crm.room.is_procedure = 0)<br>
–ï—Å–ª–∏ –≤ —Ç–µ–ª–µ –∑–∞–ø—Ä–æ—Å–∞ –ø–µ—Ä–µ–¥–∞–Ω –º–∞—Å—Å–∏–≤ `crm_room_ids`, –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–∞–±–∏–Ω–µ—Ç—ã —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º–∏ ID; –∏–Ω–∞—á–µ ‚Äî –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä–Ω—ã–µ –∫–∞–±–∏–Ω–µ—Ç—ã.

## –ó–∞–ø—Ä–æ—Å

**–ó–∞–≥–æ–ª–æ–≤–∫–∏:**  
- `Content-Type: application/json`

**–ú–æ–∂–Ω–æ –ø—É—Å—Ç–æ–µ —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ –∏–ª–∏ –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤**<br>
**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (application/json):**  
```json
{
  "crm_room_ids": [3]
}
```

| –ü–∞—Ä–∞–º–µ—Ç—Ä     | –¢–∏–ø     | –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π | –û–ø–∏—Å–∞–Ω–∏–µ                                                                 |
|--------------|---------|--------------|--------------------------------------------------------------------------|
| crm_room_ids | array   | –Ω–µ—Ç          | –ú–∞—Å—Å–∏–≤ ID –∫–∞–±–∏–Ω–µ—Ç–æ–≤ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏. –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –≤—Å–µ.   |

## –û—Ç–≤–µ—Ç 200 OK

~~~json
{
  "status": "success",
  "data": [
    {
      "id": 3,
      "office_id": 1,
      "name": "–ü—Ä–æ—Ü–µ–¥—É—Ä–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –¢–µ—Å—Ç (–∫–∞–∫–æ–π—Ç–æ —Ç–µ–∫—Å—Ç)",
      "comment": "",     
      "min_time": "08:00:00",
      "max_time": "19:00:00",
      "grid_pitch": 10,    
      "fio": "–ü—Ä–æ—Ü–µ–¥—É—Ä–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –¢–µ—Å—Ç",   
      "office": {
        "id": 1,
        "name": "–ú–û –ú–æ—Å–∫–≤–∞",
        "address": "–ú–æ—Å–∫–≤–∞, —É–ª. –£–ª–∏—Ü–∞, –¥–æ–º 28",
        "phones": "–¥–æ–±. 4017,4023",
        "comment": "–≥. –ú–æ—Å–∫–≤–∞, —É–ª. –£–ª–∏—Ü–∞, –¥–æ–º 28",
        "city": "–ú–æ—Å–∫–≤–∞",
        "time_zone": "+03:00",
        "is_deleted": 0,
        "erp_medoffice_id": 1
      },
      "isActiveApiPrice": true
    },
    {...}
  ]
}
~~~

## –û—Ç–≤–µ—Ç 200 OK
–ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å–∏–ª–∏ –∫–∞–±–∏–Ω–µ—Ç –ø–æ [id] –Ω–æ –ø—Ä–∏—à–µ–ª –ø—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç, –∑–Ω–∞—á–∏—Ç –∫–∞–±–∏–Ω–µ—Ç –ø–æ–º–µ—á–µ–Ω –∫–∞–∫ —É–¥–∞–ª–µ–Ω. –ò–ª–∏ –ø–µ—Ä–µ—Å—Ç–∞–ª –±—ã—Ç—å –ø—Ä–æ—Ü–µ–¥—É—Ä–Ω—ã–º –∫–∞–±–∏–Ω–µ—Ç–æ–º crm.room.is_procedure = 0
~~~json
{
    "status": "success",
    "data": []
}
~~~

## –û—Ç–≤–µ—Ç 200 –û–ö
–ï—Å–ª–∏ –∫–∞–∫–∏–µ –ª–∏–±–æ –æ—à–∏–±–∫–∏
```json
{
  "status": "fail",
  "error": "–¢–µ–∫—Å—Ç –æ—à–∏–±–∫–∏",
  "code": (int) –∫–æ–¥ –æ—à–∏–±–∫–∏
}
```


## –ü–æ–ª—è –æ–±—ä–µ–∫—Ç–∞ –∫–∞–±–∏–Ω–µ—Ç–∞

| –ü–æ–ª–µ                        | –¢–∏–ø       | –û–ø–∏—Å–∞–Ω–∏–µ                                                               |
|-----------------------------|-----------|------------------------------------------------------------------------|
| `id`                        | integer   | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–∞–±–∏–Ω–µ—Ç–∞ (crm.room.id)                        |
| `office_id`                 | integer   | ID –æ—Ñ–∏—Å–∞ (crm.office.id)                                               |
| `name`                      | string    | –ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞–±–∏–Ω–µ—Ç–∞                                                      |
| `comment`                   | string    | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π  –º–æ–∂–µ—Ç –±—ã—Ç—å –±–æ–ª—å—à–µ 255 —Å–∏–º–≤–æ–ª–æ–≤                            |
| `min_time`                  | time      | –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã (`HH:MM:SS`)                                       |
| `max_time`                  | time      | –í—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è —Ä–∞–±–æ—Ç—ã (`HH:MM:SS`)                                    |
| `fio`                       | string    | –ß–∏—Å—Ç–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ (–≤ name –±—ã–≤–∞—é—Ç –¥–æ–±–∞–≤–ª—è—é—Ç –¥–æ–ø –∏–Ω—Ñ—É - –¥–ª—è crm)           |
| `isActiveApiPrice`          | boolean   | –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω–æ –ª–∏ API –¥–ª—è PRICE !!!                                     |
| `office`                    | object    | –û–±—ä–µ–∫—Ç –æ—Ñ–∏—Å–∞ (—Å–º. –Ω–∏–∂–µ)                                                |

## –ü–æ–ª—è –æ–±—ä–µ–∫—Ç–∞ `office`

| –ü–æ–ª–µ               | –¢–∏–ø       | –û–ø–∏—Å–∞–Ω–∏–µ                                                   |
|--------------------|-----------|------------------------------------------------------------|
| `id`               | integer   | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –æ—Ñ–∏—Å–∞ (crm.office.id)             |
| `name`             | string    | –ù–∞–∑–≤–∞–Ω–∏–µ –æ—Ñ–∏—Å–∞                                             |
| `address`          | string    | –ê–¥—Ä–µ—Å                                                      |
| `phones`           | string    | –¢–µ–ª–µ—Ñ–æ–Ω—ã                                                   |
| `comment`          | string    | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –±–æ–ª—å—à–µ 255 —Å–∏–º–≤–æ–ª–æ–≤                 |
| `city`             | string    | –ì–æ—Ä–æ–¥                                                      |
| `time_zone`        | string    | –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å (`+03:00`)                                    |
| `is_deleted`       | integer   | –§–ª–∞–≥ —É–¥–∞–ª–µ–Ω–∏—è (0/1)                                        |
| `erp_medoffice_id` | integer   | ID –º–µ–¥–æ—Ñ–∏—Å–∞ –≤ ERP                                          |



## üßæ –ö–æ–¥—ã –æ—à–∏–±–æ–∫ API

–û–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö –∫–æ–¥–æ–≤ –æ—à–∏–±–æ–∫, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –≤ –ø–æ–ª–µ `code` –ø—Ä–∏ —Å—Ç–∞—Ç—É—Å–µ `"fail"`:

| –ö–æ–¥ | –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞                     | –û–ø–∏—Å–∞–Ω–∏–µ                                                         |
|-----|-------------------------------|------------------------------------------------------------------|
| 2   | `CODE_BAD_API`                | –ù–µ–≤–µ—Ä–Ω—ã–π API-–∫–ª—é—á. –ö–ª–∏–µ–Ω—Ç –Ω–µ –ø—Ä–æ—à—ë–ª –ø—Ä–æ–≤–µ—Ä–∫—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.        |
| 8   | `CODE_NOT_FOUND`              | –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã–π –æ–±—ä–µ–∫—Ç  –Ω–µ –Ω–∞–π–¥–µ–Ω.                                 |
| 9   | `CODE_INVALID_FORMAT`         | –û—à–∏–±–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ –¥–∞–Ω–Ω—ã—Ö ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π JSON.  |
| 10  | `CODE_REQUIRED_PARAM`         | –ù–µ –ø–µ—Ä–µ–¥–∞–Ω—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞.                      |
| 11  | `CODE_ALREADY_EXIST`          | –û–±—ä–µ–∫—Ç —Å —Ç–∞–∫–∏–º –∑–Ω–∞—á–µ–Ω–∏–µ–º —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç .                        |
| 12  | `CODE_VALIDATION`             | –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –º–æ–¥–µ–ª–∏ ‚Äî –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∏–ª–∏ –ø—É—Å—Ç—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è.      |
| 13  | `CODE_VALIDATION_OR_NO_VACANT`| –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –º–æ–¥–µ–ª–∏ –∏–ª–∏ —Å–ª–æ—Ç –∑–∞–Ω—è—Ç                           |

