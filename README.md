# üìò API: –°–ü–ò–°–û–ö –Ø–ß–ï–ï–ö –î–õ–Ø –ó–ê–ü–ò–°–ò

## üì¶ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫

–í—Å–µ –æ—Ç–≤–µ—Ç—ã –æ—Ç API –ø—Ä–∏—Ö–æ–¥—è—Ç —Å HTTP —Å—Ç–∞—Ç—É—Å–æ–º **200 OK**, –≤–Ω–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞.  
–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –ø–æ –ø–æ–ª—é `status` –≤ —Ç–µ–ª–µ –æ—Ç–≤–µ—Ç–∞:

- `"status": "success"` ‚Äî –æ–ø–µ—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ.
- `"status": "fail"` ‚Äî –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞, –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø–æ–ª—è—Ö `error` –∏ `code`.


## üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

–í—Å–µ –º–µ—Ç–æ–¥—ã —Ç—Ä–µ–±—É—é—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫:

X-Api-Key: {your_api_key}

–ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º API-–∫–ª—é—á–µ:
```json
{
  "status": "fail",
  "error": "Bad API key",
  "code": 2
}
```


## üì• –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–∫–æ —è—á–µ–µ–∫

–ú–µ—Ç–æ–¥: POST /api/price/schedule/cells
–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä erp_employee_doctor_ids –º–∞—Å—Å–∏–≤ erp.employee_doctor.id

POST /api/price/schedule/cells
X-Api-Key: your_api_key

–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:
–ø—É—Å—Ç–æ–µ —Ç–µ–ª–æ
```json
{
  
}
```
–∏–ª–∏
```json
{
  "erp_employee_doctor_ids": [],
}
```
–∏–ª–∏
```json
{
  "erp_employee_doctor_ids": [20,22],
}
```

–ü—Ä–∏–¥—É—Ç –≤—Å–µ —è—á–µ–π–∫–∏ (—Å–≤–æ–±–æ–¥–Ω—ã–µ –∏ –∑–∞–Ω—è—Ç—ã–µ)
free = 1 - —Å–≤–æ–±–æ–¥–Ω–∞
free = 0 - –∑–∞–Ω—è—Ç–∞

type = 1 - –ø—Ä–∏—ë–º –≤ –æ—Ñ–∏—Å–µ.
type = 3 - –ø—Ä–∏—ë–º –æ–Ω–ª–∞–π–Ω.

–û—Ç–≤–µ—Ç 200:
```json
{
    "status": "success",
    "data": {
        "1": { // "1" - —ç—Ç–æ erp_medoffice_id
            "20": {
                "fio": "–ö–∞–Ω–∏–≤–µ—Ü –ò–ª—å—è –í—è—á–µ—Å–ª–∞–≤–æ–≤–∏—á",
                "erp_medoffice_id": 1,
                "erp_employee_doctor_id": 20,
                "crm_room_id": 29,
                "cells": [
                    {
                        "dt": "2025-04-30",
                        "time_start": "09:00",
                        "time_end": "10:30",
                        "free": 1,
                        "type": 3
                    },
                    {
                        "dt": "2025-04-30",
                        "time_start": "10:30",
                        "time_end": "12:00",
                        "free": 0,
                        "type": 3
                    },                   
                ]
            },
            "22": {
                "fio": "–ö–∏–µ–≤—Å–∫–∞—è –Æ–ª–∏—è –ö–∏—Ä–∏–ª–ª–æ–≤–Ω–∞",
                "erp_medoffice_id": 1,
                "erp_employee_doctor_id": 22,
                "crm_room_id": 30,
                "cells": [
                    {
                        "dt": "2025-05-04",
                        "time_start": "09:00",
                        "time_end": "10:00",
                        "free": 1,
                        "type": 1
                    },                   
                ]
            }
        }
    }
}
```
–û—à–∏–±–∫–∞:
```json
{
  "status": "fail",
  "error": "–¢–µ–∫—Å—Ç –æ—à–∏–±–∫–∏",
  "code": (int) –∫–æ–¥ –æ—à–∏–±–∫–∏
}
```





## üßæ –ö–æ–¥—ã –æ—à–∏–±–æ–∫ API

–û–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö –∫–æ–¥–æ–≤ –æ—à–∏–±–æ–∫, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –≤ –ø–æ–ª–µ `code` –ø—Ä–∏ —Å—Ç–∞—Ç—É—Å–µ `"fail"`:

| –ö–æ–¥ | –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞               | –û–ø–∏—Å–∞–Ω–∏–µ                                                         |
|-----|-------------------------|------------------------------------------------------------------|
| 2   | `CODE_BAD_API`          | –ù–µ–≤–µ—Ä–Ω—ã–π API-–∫–ª—é—á. –ö–ª–∏–µ–Ω—Ç –Ω–µ –ø—Ä–æ—à—ë–ª –ø—Ä–æ–≤–µ—Ä–∫—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.        |
| 8   | `CODE_NOT_FOUND`        | –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã–π –æ–±—ä–µ–∫—Ç  –Ω–µ –Ω–∞–π–¥–µ–Ω.                                 |
| 9   | `CODE_INVALID_FORMAT`   | –û—à–∏–±–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ –¥–∞–Ω–Ω—ã—Ö ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π JSON.  |
| 10  | `CODE_REQUIRED_PARAM`   | –ù–µ –ø–µ—Ä–µ–¥–∞–Ω—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞.                      |
| 11  | `CODE_ALREADY_EXIST`    | –û–±—ä–µ–∫—Ç —Å —Ç–∞–∫–∏–º –∑–Ω–∞—á–µ–Ω–∏–µ–º —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç .                        |
| 12  | `CODE_VALIDATION`       | –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –º–æ–¥–µ–ª–∏ ‚Äî –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∏–ª–∏ –ø—É—Å—Ç—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è.      |
